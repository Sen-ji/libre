(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{1:function(e,t){},ng4s:function(e,t,n){"use strict";n.r(t);n("sZ/o"),n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("pjDv"),n("yXV3"),n("J30X"),n("4mDm"),n("2B1R"),n("+2oP"),n("DQNa"),n("wLYn"),n("sMBO"),n("Tskq"),n("uL8W"),n("eoL8"),n("NBAS"),n("ExoC"),n("07d7"),n("4l63"),n("SuFq"),n("JfAA"),n("PKPk"),n("3bBZ");var r=n("i8i4"),o=n.n(r),a=n("q1tI"),c=n.n(a);n("oVuX"),n("5s+n"),n("rB9j"),n("EnZy"),n("ls82");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){l(a,r,o,c,u,"next",e)}function u(e){l(a,r,o,c,u,"throw",e)}c(void 0)}))}}function f(e){return p.apply(this,arguments)}function p(){return(p=s(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2&&void 0!==u[2]?u[2]:null,o={method:n,headers:{Accept:"application/ld+json","Content-Type":"application/json"}},r&&(o.body=JSON.stringify(r)),e.next=6,fetch(t,o);case 6:if(204!=(a=e.sent).status){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,a.json();case 11:if(c=e.sent,!a.ok){e.next=16;break}return e.abrupt("return",c);case 16:throw c;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var t,n=u(Object(a.useState)(!1),2),r=n[0],o=n[1],c=u(Object(a.useState)([]),2),i=c[0],l=c[1],p=Object(a.useCallback)(s(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(!0),n.prev=1,n.next=4,f(e);case 4:t=n.sent,l(t),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:o(!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])}))),[e]);return{items:i,setItems:l,load:p,loading:r,response:t}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(a.useState)(!1),o=u(r,2),c=o[0],i=o[1],l=Object(a.useCallback)(s(regeneratorRuntime.mark((function r(){var o,a,c=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=c.length>0&&void 0!==c[0]?c[0]:null,i(!0),r.prev=2,r.next=5,f(e,t,o);case 5:a=r.sent,i(!1),n&&n(a),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),i(!1);case 13:case"end":return r.stop()}}),r,null,[[2,10]])}))),[e,t,n]);return{load:l,loading:c}}var b=n("gFX4"),y=n.n(b);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){var t="function"==typeof Map?new Map:void 0;return(E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return j(e,arguments,S(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),O(r,e)})(e)}function j(e,t,n){return(j=w()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&O(o,n.prototype),o}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){e.message;var t=e.user,n=y()("192.168.1.48:3005",{jsomp:!1}),r=function(e){var t=u(Object(a.useState)(!1),2),n=t[0],r=t[1],o=u(Object(a.useState)([]),2),c=o[0],i=o[1],l=Object(a.useCallback)(s(regeneratorRuntime.mark((function t(){var n,o,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,f(e);case 4:return n=t.sent,t.next=7,f(n["hydra:view"]["hydra:last"]);case 7:return o=t.sent,(a=n["hydra:view"]["hydra:last"].split("="))[1]-=1,a=a.join("="),t.next=13,f(a);case 13:c=t.sent,o["hydra:member"]=c["hydra:member"].concat(o["hydra:member"]),i(o["hydra:member"]),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),console.error(t.t0);case 21:r(!1);case 22:case"end":return t.stop()}}),t,null,[[1,18]])}))),[e]);return{items:c,setItems:i,load:l,loading:n}}("/api/messages"),o=r.items,i=r.setItems,l=r.load,p=r.loading,m=Object(a.useCallback)((function(e){n.emit("addMessage",e)}),[]),d=Object(a.useCallback)((function(e){n.emit("deleteMessage",e.id)}),[]),b=Object(a.useCallback)((function(e,t){n.emit("updateMessage",e)}),[]);return Object(a.useEffect)((function(){n.on("addMessage",(function(e){console.log(o),i((function(t){return[].concat(x(t),[e])})),document.getElementById("messageslist").scrollTop=document.getElementById("messageslist").scrollHeight})),n.on("deleteMessage",(function(e){i((function(t){return t.filter((function(t){return t.id!=e}))}))})),n.on("updateMessage",(function(e){console.log(e),i((function(t){return t.map((function(t){return t.id==e.id&&(t=e),t}))}))})),l()}),[]),c.a.createElement("div",{className:"h-100"},c.a.createElement("div",{className:"h-75",id:"messageslist"},p&&"Chargement...",o.map((function(e){return c.a.createElement(T,{key:e.id,message:e,canEdit:e.author.id==t,onDelete:d,onUpdate:b})}))),t?c.a.createElement(R,{onMessage:m,className:"h-25"}):c.a.createElement("h4",{className:"font-weight-bold text-center"},"Vous devez Ãªtre connecter pour participer au chat "))}var R=c.a.memo((function(e){var t=e.onMessage,n=e.message,r=void 0===n?null:n,o=Object(a.useRef)(null),u=Object(a.useCallback)((function(e){t(e),o.current.value=" "}),[o,t]),i=r?"PUT":"POST",l=d(r?r["@id"]:"/api/messages",i,u),s=l.load,f=l.loading,p=Object(a.useCallback)((function(e){console.log("submit"),e.preventDefault(),s({content:o.current.value})}),[s,o]);return Object(a.useEffect)((function(){r&&r.content&&o.current&&(o.current.value=r.content)}),[r,o]),c.a.createElement("div",{className:"well"},c.a.createElement("form",{onSubmit:p},c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Messages")),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{ref:o,id:"",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("button",{className:"btn btn-primary btn-sm",disabled:f},"Envoyer"))))})),T=c.a.memo((function(e){var t=e.message,n=e.onDelete,r=e.canEdit,o=e.onUpdate,u=k(Object(a.useState)("VIEW"),2),i=u[0],l=u[1],s=Object(a.useCallback)((function(){l((function(e){return"VIEW"==e?"EDIT":"VIEW"}))}),[]),f=new Date(t.date),p=Object(a.useCallback)((function(){n(t)}),[t]),m=Object(a.useCallback)((function(e){o(e,t),s()}),[t]),b=d(t["@id"],"DELETE",p),y=b.loading,h=b.load;return c.a.createElement("div",{className:"p-3"},c.a.createElement("h4",{className:"col-sm-3 "},t.author.username),"VIEW"==i?c.a.createElement("div",null,t.content):c.a.createElement(R,{message:t,onMessage:m}),r&&"VIEW"==i&&c.a.createElement("p",null,c.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:h.bind(void 0,null),disabled:y},"supprimer"),c.a.createElement("button",{className:"btn btn-secondary btn-sm",onClick:s,disabled:y},"edit")),c.a.createElement("strong",null,f.toLocaleString()))})),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,e);var t,n,o,a,u,i=(t=l,n=w(),function(){var e,r=S(t);if(n){var o=S(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return g(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return o=l,(a=[{key:"connectedCallback",value:function(){var e=parseInt(this.dataset.user,10);console.log(this.dataset),Object(r.render)(c.a.createElement(N,{user:e}),this)}}])&&v(o.prototype,a),u&&v(o,u),l}(E(HTMLElement));function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function V(e){var t=H();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){var t="function"==typeof Map?new Map:void 0;return(F=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return W(e,arguments,U(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),J(r,e)})(e)}function W(e,t,n){return(W=H()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&J(o,n.prototype),o}).apply(null,arguments)}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){var t=e.num,n=m("/api/chapitres/"+t),r=n.items,o=(n.setItems,n.load);n.loading;return Object(a.useEffect)((function(){o()}),[t]),c.a.createElement("div",{className:"cardChapter "},c.a.createElement("img",{className:"",src:"img/"+r.couverture}),c.a.createElement("div",{className:"container h-100 "},c.a.createElement("div",{className:"chapitreGran",id:"chapter-"+t},c.a.createElement("h1",null," ",r.titre),r.content)))}function X(e){var t=e.num,n=m("/api/chapitres/"+t);n.items,n.setItems,n.load,n.loading;return c.a.createElement("div",{className:"customcart",onClick:function(e){var n=c.a.createElement(q,{num:t});o.a.render(n,document.querySelector("#ChapitresBas")),document.getElementById("ChapitresBas").scrollIntoView({behavior:"smooth"})}})}customElements.define("post-messages",M);var Z=function(e){B(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return D(n,[{key:"connectedCallback",value:function(){var e=this.dataset.numberchap;console.log(e),Object(r.render)(c.a.createElement(X,{num:e}),this)}}]),n}(F(HTMLElement)),G=function(e){B(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return D(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"headimagediv"},c.a.createElement("img",{className:"headblog",src:"img/path.jpg",alt:"beautifull"}))}}]),n}(a.Component);customElements.define("post-p",Z);var Q=function(e){B(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return D(n,[{key:"connectedCallback",value:function(){Object(r.render)(c.a.createElement(G,null),this)}}]),n}(F(HTMLElement));customElements.define("post-m",Q),console.log("Hello Webpack Encore! Edit me in assets/js/app.js")},"sZ/o":function(e,t,n){}},[["ng4s","runtime",0]]]);